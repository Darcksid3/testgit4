<% if (typeof catway !== 'undefined') { %> 
    <table> 
        <tr> 
            <td>Numéro</td>
            <td>Type</td>
            <td>Etat</td>
        </tr> 
        <tr> 
            <td><%= catway ? catway.catwayNumber : '' %></td> 
            <td><%= catway ? catway.catwayType : '' %></td> 
            <td><%= catway ? catway.catwayState : '' %></td> 
        </tr> 
    </table> 
<% } else { %> 
    <p style="color: red; font-weight: bold;">Aucun catway trouvée.</p> 
    <% } %> 
    <form method="post" action="/catways/<%= catway ? catway.catwayNumber : '' %>" id="Form-modify-catway"> 
        <fieldset> 
            <legend>Modification d'un catway</legend> 
            <div id="clickDiv">
                <p> 
                    <label for="catwayNumber">Numéro de catway :</label> 
                    <input type="text" name="catwayNumber" id="catwayNumber" value="<%= catway ? catway.catwayNumber : '' %>" readonly /> 
                </p> 
                <p> <label for="short">Short</label> 
                    <input type="radio" name="catwayType" id="short" value="short" <%= catway && catway.catwayType === 'short' ? 'checked' : '' %> /> 
                    <label for="long">Long</label> 
                    <input type="radio" name="catwayType" id="long" value="long" <%= catway && catway.catwayType === 'long' ? 'checked' : '' %> /> 
                </p>
                <div class="form-row">
                    <div class="form-column"><label for="catwayState">Etat du catway</label></div>
                    <div class="form-column"><textarea cols="20" rows="3" name="catwayState" id="catwayState"><%=  catway ? catway.catwayState: ''  %></textarea></div>
                </div>
            </div>

            <p>
                <button type="submit" id="modify">Modifier et Enregistrer</button>
                <button form="Form-delete-catway" type="submit" id="delete">Supprimer</button>
            </p>
        </fieldset>
        <div>
            <% if(typeof reservations !== 'undefined' && reservations.length > 0) { %>
                <strong class="attention">Attention des réservations sont associées à ce catway</strong><br />
                <strong class="attention">Veuillez faire le nésséssaire avant de le supprimer</strong>
                <table>
                    <thead>
                        <td>Numéro de réservation</td><td>Nom du client</td><td>Nom du bateau</td><td>Date de début</td><td>Date de fin</td><td></td><td></td>
                    </thead>
                    <% reservations.forEach(function(res) { %>
                    <tr>
                        <td> <%= res._id %></td>
                        <td><%= res.clientName %> </td>
                        <td><%= res.boatName %> </td>
                        <td><%= new Date(res.startDate).toLocaleDateString('fr-FR') %> </td> 
                        <td><%= new Date(res.endDate).toLocaleDateString('fr-FR') %></td>
                        <td><a href="/catways/<%= res.catwayNumber %>/reservations/<%= res._id %>?page=findOneReserv" class="afficher">Affiché</a></td>
                        <td><a href="/catways/<%= res.catwayNumber %>/reservations/<%= res._id %>?page=modifyReserv" class="modifier">Modifier</a></td>
                    </tr>
                    <% }) %>
                </table>
            <% } else { %>
                <p>Aucune réservation pour ce catway.</p>   
            <% } %>
        </div>
        
    </form>

    <form method="POST" action="/catways/<%= catway ? catway.catwayNumber : '' %>" id="Form-delete-catway">
    
    

    </form>

    <script src="/javascripts/cat_modfy_form.js"></script>



